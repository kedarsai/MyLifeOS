{% set total_pages = [1, ((total + page_size - 1) // page_size)]|max %}
<p><strong>{{ total }}</strong> entries. Page {{ page }} of {{ total_pages }}.</p>
{% set groups = items|group_by_month %}
{% for label, group_items in groups %}
<div class="timeline-group">
  <h3 class="timeline-month-heading">{{ label }}</h3>
  <div class="entry-list">
    {% for item in group_items %}
    <article class="entry-card">
      <h4>{{ item.summary or '(no summary)' }}</h4>
      <p><code>{{ item.id }}</code></p>
      <p><strong>Created:</strong> {{ item.created_at }} | <strong>Type:</strong> {{ item.type }} | <strong>Status:</strong> {{ item.status }}</p>
      <p><strong>Tags:</strong> {{ item.tags|join(', ') or '-' }} | <strong>Goals:</strong> {{ item.goals|join(', ') or '-' }}</p>
      <p>{{ item.raw_text|truncate_text(180) }}</p>
    </article>
    {% endfor %}
  </div>
</div>
{% else %}
<p>No entries match this filter.</p>
{% endfor %}
<div class="pager">
  {% if page > 1 %}
  <button type="button"
    hx-get="/api/entries/timeline?{{ pager_base }}&page={{ page - 1 }}"
    hx-target="#timeline-results" hx-swap="innerHTML">Previous</button>
  {% endif %}
  {% if page < total_pages %}
  <button type="button"
    hx-get="/api/entries/timeline?{{ pager_base }}&page={{ page + 1 }}"
    hx-target="#timeline-results" hx-swap="innerHTML">Next</button>
  {% endif %}
</div>
